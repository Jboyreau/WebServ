server {
	listen 2020;
	host 127.0.0.1;
	server_name example.org www.example.org;
	error_page 404 /custom_404.html;
	client_max_body_size 1;
	location /index.php {
		limit_except GET;
		return /new-path;
		root /usr/share/nginx/html;
		autoindex on;
		index index.html;
		cgi_path /usr/bin/php;
	}
}

server {
    listen 2000;
    host 127.0.0.1;
    server_name example.com;

# Pages d'erreur par défaut
    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;

# Limite de taille du body
    client_max_body_size 8;

# Route par défaut
    location / {
        root /var/www/html;
        index index.html index.htm;
        autoindex off;
    }

# Route pour un répertoire spécifique
    location /images/ {
        root /var/www/media;
        autoindex on;
    }

# Route avec exécution CGI
    location /cgi-bin/ {
        root /var/www;
        cgi_pass /usr/bin/php-cgi;
        limit_except GET;
    }

# Route avec téléversement de fichiers
    location /upload/ {
        root /var/www/uploads;
        upload_store /var/www/uploads/store;
        limit_except POST;
    }

# Redirection HTTP
    location /old-page {
        return 301 /new-page;
    }
}
